<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:int-http="http://www.springframework.org/schema/integration/http"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <!-- NO xsi:schemaLocation - This prevents ALL external schema calls -->

    <!-- BASIC CHANNELS -->
    <int:channel id="inputChannel"/>
    <int:channel id="outputChannel"/>

    <!-- SIMPLE TRANSFORMER -->
    <int:transformer id="messageTransformer"
                     input-channel="inputChannel"
                     output-channel="outputChannel"
                     expression="'PROCESSED: ' + payload.toString().toUpperCase()"/>

    <!-- SERVICE ACTIVATOR -->
    <int:service-activator input-channel="outputChannel"
                           ref="messageProcessor"
                           method="handle"/>
    
    <bean id="messageProcessor" class="com.ads.apiseng.handlers.SimpleHandler">
        <constructor-arg value="BASIC-PROCESSOR"/>
    </bean>

    <!-- HTTP ENDPOINT -->
    <int-http:inbound-gateway id="httpEndpoint"
                              supported-methods="POST"
                              request-channel="inputChannel"
                              path="/api/basic-transform"/>

</beans>